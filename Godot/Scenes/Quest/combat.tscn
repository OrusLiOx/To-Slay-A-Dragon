[gd_scene load_steps=10 format=3 uid="uid://bxfmkq8bgumev"]

[ext_resource type="Script" path="res://Scenes/Scripts/combat.gd" id="1_l0hou"]
[ext_resource type="PackedScene" uid="uid://bs6ej35oeq114" path="res://Scenes/Quest/note.tscn" id="2_ob6w2"]
[ext_resource type="PackedScene" uid="uid://bnvwxkdgsp4vp" path="res://Scenes/Pieces/part_sprite.tscn" id="3_s2yiu"]
[ext_resource type="PackedScene" uid="uid://dmylbepggimag" path="res://Scenes/Quest/enemy_sprite.tscn" id="4_7b527"]
[ext_resource type="LabelSettings" uid="uid://dw18pcv0wtiom" path="res://Themes/BodyLabel.tres" id="5_ipftc"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dn3ik"]
size = Vector2(300, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jyscs"]
size = Vector2(150, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ojbx8"]
size = Vector2(15, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ogskr"]
size = Vector2(127, 100)

[node name="Combat" type="Node2D"]
script = ExtResource("1_l0hou")
noteScene = ExtResource("2_ob6w2")

[node name="Background" type="ColorRect" parent="."]
offset_right = 924.0
offset_bottom = 984.0
color = Color(0.933333, 0.862745, 0.701961, 1)

[node name="EnemyScreen" type="ColorRect" parent="."]
offset_left = 26.0
offset_top = 16.0
offset_right = 904.0
offset_bottom = 739.0
color = Color(0.588235, 0.505882, 0.439216, 1)

[node name="background" type="Sprite2D" parent="EnemyScreen"]
position = Vector2(439, 361.5)

[node name="Reward" type="Label" parent="EnemyScreen"]
offset_left = 408.0
offset_top = 224.0
offset_right = 448.0
offset_bottom = 247.0
label_settings = ExtResource("5_ipftc")

[node name="PartSprite" parent="EnemyScreen" instance=ExtResource("3_s2yiu")]
position = Vector2(442, 328)

[node name="Enemy" parent="EnemyScreen" node_paths=PackedStringArray("background") instance=ExtResource("4_7b527")]
position = Vector2(439, 361.5)
background = NodePath("../background")

[node name="Health" type="ColorRect" parent="EnemyScreen"]
offset_left = 17.0
offset_top = 636.0
offset_right = 563.0
offset_bottom = 676.0
color = Color(0.254902, 0.105882, 0.105882, 1)

[node name="Name" type="Label" parent="EnemyScreen/Health"]
layout_mode = 0
offset_top = -41.0
offset_right = 137.0
label_settings = ExtResource("5_ipftc")

[node name="Current" type="ColorRect" parent="EnemyScreen/Health"]
layout_mode = 0
offset_right = 546.0
offset_bottom = 40.0
color = Color(0.0156863, 0.690196, 0, 1)

[node name="LastHit" type="Label" parent="EnemyScreen/Health"]
layout_mode = 0
offset_left = 1.0
offset_top = 42.0
offset_right = 81.0
offset_bottom = 84.0
label_settings = ExtResource("5_ipftc")

[node name="You" type="ColorRect" parent="EnemyScreen"]
offset_left = 12.0
offset_top = 912.0
offset_right = 558.0
offset_bottom = 952.0
color = Color(0.254902, 0.105882, 0.105882, 1)

[node name="Name" type="Label" parent="EnemyScreen/You"]
layout_mode = 0
offset_top = -41.0
offset_right = 137.0
text = "You"
label_settings = ExtResource("5_ipftc")

[node name="Current" type="ColorRect" parent="EnemyScreen/You"]
layout_mode = 0
offset_right = 546.0
offset_bottom = 40.0
color = Color(0.0156863, 0.690196, 0, 1)

[node name="LastHit" type="Label" parent="EnemyScreen/You"]
layout_mode = 0
offset_left = 466.0
offset_top = -40.0
offset_right = 546.0
label_settings = ExtResource("5_ipftc")
horizontal_alignment = 2

[node name="Minigame" type="Node2D" parent="."]
position = Vector2(-2, 822)

[node name="Notes" type="ColorRect" parent="Minigame"]
clip_children = 2
offset_left = 75.0
offset_top = -59.0
offset_right = 841.0
offset_bottom = 62.0
color = Color(0.588235, 0.505882, 0.439216, 1)

[node name="Goal" type="Sprite2D" parent="Minigame"]
position = Vector2(166, 0)

[node name="ColorRect" type="ColorRect" parent="Minigame/Goal"]
offset_left = -50.0
offset_top = -50.0
offset_right = 50.0
offset_bottom = 50.0
color = Color(1, 1, 1, 0.458824)

[node name="Bad" type="Area2D" parent="Minigame/Goal"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Minigame/Goal/Bad"]
shape = SubResource("RectangleShape2D_dn3ik")

[node name="Ok" type="Area2D" parent="Minigame/Goal"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Minigame/Goal/Ok"]
shape = SubResource("RectangleShape2D_jyscs")

[node name="Good" type="Area2D" parent="Minigame/Goal"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Minigame/Goal/Good"]
shape = SubResource("RectangleShape2D_ojbx8")

[node name="Kill" type="Area2D" parent="Minigame"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Minigame/Kill"]
position = Vector2(-53.5, 1)
shape = SubResource("RectangleShape2D_ogskr")

[node name="Timer" type="Timer" parent="."]

[connection signal="area_entered" from="Minigame/Goal/Bad" to="." method="_on_bad_area_entered"]
[connection signal="area_exited" from="Minigame/Goal/Bad" to="." method="_on_bad_area_exited"]
[connection signal="area_entered" from="Minigame/Goal/Ok" to="." method="_on_ok_area_entered"]
[connection signal="area_exited" from="Minigame/Goal/Ok" to="." method="_on_ok_area_exited"]
[connection signal="area_entered" from="Minigame/Goal/Good" to="." method="_on_good_area_entered"]
[connection signal="area_exited" from="Minigame/Goal/Good" to="." method="_on_good_area_exited"]
[connection signal="area_entered" from="Minigame/Kill" to="." method="_on_kill_area_entered"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
